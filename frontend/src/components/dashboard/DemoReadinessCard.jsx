function DemoReadinessCard({ demoReadiness }) {
  const { score = 0, status = "Not Ready" } = demoReadiness || {};

  const getStatusStyle = (status) => {
    const base = {
      display: "inline-block",
      padding: "8px 16px",
      borderRadius: 8,
      fontSize: 14,
      fontWeight: 700,
      marginTop: 12,
      letterSpacing: "0.05em"
    };

    if (status === "Ready") {
      return { ...base, background: "rgba(34, 197, 94, 0.16)", color: "#86efac", border: "1px solid rgba(34, 197, 94, 0.3)" };
    }
    if (status === "Risky") {
      return { ...base, background: "rgba(245, 158, 11, 0.16)", color: "#fcd34d", border: "1px solid rgba(245, 158, 11, 0.3)" };
    }
    if (status === "Not Ready") {
      return { ...base, background: "rgba(239, 68, 68, 0.16)", color: "#fca5a5", border: "1px solid rgba(239, 68, 68, 0.3)" };
    }
    return { ...base, background: "var(--bg-secondary)", color: "var(--text-primary)", border: "1px solid var(--border-glass)" };
  };

  const getProgressBarColor = (status) => {
    if (status === "Ready") return "#22c55e";
    if (status === "Risky") return "#f59e0b";
    return "#ef4444";
  };

  return (
    <section className="fade-in" style={{ marginTop: 32 }}>
      <div className="card">
        <h2 style={{ margin: "0 0 8px", fontSize: 22, fontWeight: 800 }}>
          Demo Readiness Score
        </h2>
        <p className="text-muted" style={{ marginTop: 0, marginBottom: 24 }}>
          Executive-level readiness assessment for demo day
        </p>

        <div
          style={{
            display: "flex",
            alignItems: "flex-start",
            gap: 40
          }}
        >
          {/* Score Circle */}
          <div
            style={{
              display: "flex",
              flexDirection: "column",
              alignItems: "center"
            }}
          >
            <div
              style={{
                width: 120,
                height: 120,
                borderRadius: "50%",
                background: `linear-gradient(135deg, ${getProgressBarColor(
                  status
                )}1a 0%, ${getProgressBarColor(status)}2a 100%)`,
                border: `3px solid ${getProgressBarColor(status)}`,
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
                fontSize: 56,
                fontWeight: 900,
                color: getProgressBarColor(status),
                letterSpacing: "-0.02em"
              }}
            >
              {score}
            </div>

            <span style={getStatusStyle(status)}>{status}</span>
          </div>

          {/* Progress Bar & Details */}
          <div style={{ flex: 1 }}>
            {/* Progress Bar */}
            <div
              style={{
                marginBottom: 24
              }}
            >
              <div
                style={{
                  fontSize: 12,
                  fontWeight: 600,
                  color: "var(--text-secondary)",
                  marginBottom: 8,
                  textTransform: "uppercase",
                  letterSpacing: "0.05em"
                }}
              >
                Readiness Progress
              </div>
              <div
                style={{
                  height: 12,
                  borderRadius: 8,
                  background: "var(--bg-secondary)",
                  border: "1px solid var(--border-glass)",
                  overflow: "hidden"
                }}
              >
                <div
                  style={{
                    width: `${score}%`,
                    height: "100%",
                    borderRadius: 8,
                    background: getProgressBarColor(status),
                    transition: "width 0.3s ease"
                  }}
                />
              </div>
            </div>

            {/* Status Description */}
            <div style={{ marginBottom: 16 }}>
              <h4
                style={{
                  margin: "0 0 8px",
                  fontSize: 13,
                  fontWeight: 700,
                  color: "var(--text-primary)",
                  textTransform: "uppercase",
                  letterSpacing: "0.05em"
                }}
              >
                Assessment Summary
              </h4>
              <p style={{ margin: 0, fontSize: 14, color: "var(--text-secondary)", lineHeight: 1.6 }}>
                {getStatusMessage(status, score)}
              </p>
            </div>

            {/* Key Factors */}
            <div
              style={{
                padding: 12,
                borderRadius: 8,
                background: "var(--bg-secondary)",
                border: "1px solid var(--border-glass)",
                fontSize: 13,
                color: "var(--text-secondary)",
                lineHeight: 1.6
              }}
            >
              <p style={{ margin: "0 0 6px", fontWeight: 600, color: "var(--text-primary)" }}>
                Score Factors:
              </p>
              <p style={{ margin: "2px 0" }}>• Open issues, branch sync, commit velocity</p>
              <p style={{ margin: "2px 0" }}>• Active contributor count & development pace</p>
              <p style={{ margin: "2px 0" }}>• Stale branch detection & team momentum</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  );
}

function getStatusMessage(status, score) {
  if (status === "Ready") {
    return `With a score of ${score}, your project is well-organized and ready for demo day. The team is active, issues are managed, and the codebase is in good shape.`;
  }
  if (status === "Risky") {
    return `With a score of ${score}, your project shows potential but has some concerns. Review open issues, boost commit velocity, and ensure team alignment before demo day.`;
  }
  return `With a score of ${score}, your project needs immediate attention. Address critical blockers, increase team activity, and resolve major issues before the demo.`;
}

export default DemoReadinessCard;
